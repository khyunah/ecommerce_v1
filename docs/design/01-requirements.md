# 요구사항 정의

## [ 상품 목록 조회 스토리 ]
- 사용자는 상품 목록을 조회할 수 있다. 

### [ 기능 요구사항 & 기능흐름 ]
- 로그인과 상관없이 상품 목록 조회 가능하다.
- 특정 브랜드의 상품만 조회할 수 있다.
- 브랜드와 상관없이 전체 상품을 조회할 수 있다.
- 정렬을 하여 조회할 수 있다.
- 상품 메인이미지, 가격, 좋아요 수, 상품 이름, 브랜드, 할인율, 좋아요 여부, 품절 여부, 판매 여부를 볼 수 있다.

### [ 실패 케이스 ]
- page 또는 size가 숫자가 아닐 경우 -> 400 Bad Request 에러 반환
- brandId가 존재하지 않는 브랜드일 경우 -> 400 Bad Request 에러 반환

### [ 비기능 요구사항 ]
- 조회 파라미터 유효성 검증을 한다.(brandId, sort, page, size)
- brandId가 존재하지 않으면 전체 아이템 조회한다.
- 목록 정렬 기준은 여러가지여도 되나, latest는 필수이다.
- 페이지네이션은 page, size를 포함한다. (페이지번호 기본값=0, 페이지당 상품수 기본값=20)
- 페이지 번호가 0 미만일 경우 자동으로 0으로 고정한다.

  <br />
  <br />

## [ 상품 상세 정보 조회 스토리 ]
- 사용자는 상품 상세 정보를 조회할 수 있다.

### [ 기능 요구사항 & 기능흐름 ]
- 로그인과 상관없이 상품 상세 정보 조회 가능하다.
- 상품 메인이미지, 가격, 좋아요 수, 좋아요 여부, 상품 이름, 브랜드, 할인율, 상품상세설명, 리뷰, 품절여부, 판매 여부를 볼 수 있다.

### [ 실패 케이스 ]
- 상품 ID가 존재하지 않을 경우 -> 404 Not Found 에러 반환

### [ 비기능 요구사항 ]
- 상품 등록은 되어있다고 가정을 한다.(등록기능 불필요)
- 상품의 개수가 0이하인 경우 품절여부가 Y인지 확인한다.

  <br />
  <br />

## [ 브랜드 정보 조회 스토리 ]
- 사용자는 브랜드 정보를 조회할 수 있다.

### [ 기능 요구사항 & 기능흐름 ]
- 로그인 여부관계 없이 접근가능하다.
- 브랜드명, 브랜드 메인 이미지, 브랜드 설명, 상품 목록을 조회할 수 있다.

### [ 실패 케이스 ]
- 브랜드 ID가 존재하지 않을 경우 -> 404 Not Found 에러 반환

  <br />
  <br />

## [ 좋아요 등록/취소 스토리 ]
- 사용자는 좋아요를 할 수 있다.
- 좋아요 한 상품을 다시 좋아요 누르면 취소 된다.

### [ 기능 요구사항 & 기능흐름 ]
- 로그인한 사용자만 가능하다.
- 한 상품에 하나의 좋아요만 가능하다.
- 좋아요 여부를 확인하여, 없으면 저장하고 있으면 삭제한다.
- 상품 좋아요 수에 반영한다.

### [ 실패 케이스 ]
- 상품이 존재하지 않을 경우 -> 404 Not Found 에러 반환

### [ 비기능 요구사항 ]
- 상품 좋아요 수가 음수가 되지 않도록, 0 미만인 경우 0으로 고정한다.

  <br />
  <br />

## [ 좋아요 한 상품 목록 조회 스토리 ]
- 사용자는 자신이 좋아요 한 상품 목록을 조회할 수 있다.

### [ 기능 요구사항 & 기능흐름 ]
- 로그인한 사용자만 가능하다.
- 메인이미지, 가격, 할인율, 브랜드명, 제목, 좋아요 여부, 품절여부를 조회할 수 있다.
- 좋아요한 최신순으로 조회를 할 수 있다.

  <br />
  <br />

## [ 주문 요청 스토리 ]
- 사용자는 여러개의 상품을 담고 한번에 결제할 수 있다.

### [ 기능 요구사항 & 기능흐름 ]
- 로그인한 사용자만 가능하다.
- 사용자는 여러개의 상품을 주문할 수 있다.
- 상품 재고확인을 하고, 차감한다.
- 포인트 확인 및 차감한다.
- 주문정보를 외부 시스템에 전송한다.
- 여러개의 주문아이템을 하나의 주문 ID로 저장한다.
- 주문성공과 실패 메시지를 리턴한다.

### [ 실패 케이스 ]
- 주문 중 일부 상품이 품절일 경우 -> 409 Conflict 에러를 반환한다.
- 외부 시스템 연동 실패시 502 Bad Gateway 에러를 반환한다.
- 주문 중간에 서버 오류 → rollback 처리 필요 및 500에러 반환한다.
- 주문당 최대 10개의 상품까지만 가능, 넘어갈 시 오류 반환

  <br />
  <br />

## [ 주문 목록 조회 스토리 ]
- 사용자는 주문 목록을 조회할 수 있다.

### [ 기능 요구사항 & 기능흐름 ]
- 로그인한 사용자만 가능하다.
- 주문진행상황, 주문 날짜와 시간, 대표 이미지, 상품제목, 가격을 조회할 수 있다.

### [ 실패 케이스 ]
- 비로그인 사용자 -> 401 Unauthorized 에러 반환한다.
- 3년 이전 주문목록 요청 시 -> 400 Bad Request 에러 반환한다.

### [ 비기능 요구사항 ]
- 현재년도로 부터 3년까지만 조회가능하다.

  <br />
  <br />

## [ 주문 상세조회 스토리 ]
- 사용자는 주문 상세정보를 조회할 수 있다.

### [ 기능 요구사항 & 기능흐름 ]
- 로그인한 사용자만 가능하다.
- 주문번호, 브랜드명, 주문 상태, 구매확정일, 제목, 수량, 가격, 원가, 결제정보(주문금액, 쿠폰할인)를 조회할 수 있다.

### [ 실패 케이스 ]
- 주문 ID가 존재하지 않음 -> 404 에러 반환
- 해당 유저의 주문이 아님 -> 403 Forbidden 에러 반환
- 결제정보 누락 -> 500 Internal Server Error 에러 반환
- 3년 이전 주문목록 요청 시 -> 400 Bad Request 에러 반환한다.


# 유비쿼터스 언어 정의
| 용어(한글) | 용어(영문)   | 정의                                      |
|------------|---------------|-------------------------------------------|
| 사용자     | User          | 시스템을 이용하는 주체                    |
| 포인트     | Point         | 결제에 사용할 수 있는 가상 금액 단위      |
| 상품       | Product       | 사용자가 구매 가능한 아이템              |
| 브랜드     | Brand         | 상품을 만든 회사 또는 판매자             |
| 재고       | Stock         | 특정 상품의 남은 수량                    |
| 좋아요     | Like          | 사용자가 상품을 선호하는 표시            |
| 주문       | Order         | 여러 상품을 하나로 묶어 결제한 단위       |
| 주문 항목  | OrderItem     | 주문 내에 포함된 개별 상품               |
| 결제       | Payment       | 사용자가 주문한 것에 대한 지불          |
